/* === DARK MODE ADJUSTMENTS === */
[data-theme="dark"] .CodeMirror {
  background-color: var(--container-bg);
  color: var(--text-color);
}

[data-theme="dark"] .CodeMirror-placeholder.CodeMirror-line-like {
  color: #666 !important;
}

[data-theme="dark"] .CodeMirror-gutters {
  background-color: var(--bg-color);
  border-right: 1px solid var(--border-color);
}

[data-theme="dark"] .CodeMirror-linenumber {
  color: #999;
}

[data-theme="dark"] .CodeMirror-cursor {
  border-left: 1px solid #ccc;
}

[data-theme="dark"] .CodeMirror-selected {
  background-color: rgba(255, 255, 255, 0.1);
}

/* CodeMirror syntax highlighting */
.cm-s-default .cm-keyword { color: #708; }
[data-theme="dark"] .cm-s-default .cm-keyword { color: #c792ea; }

.cm-s-default .cm-bracket { color: #997; }
[data-theme="dark"] .cm-s-default .cm-bracket { color: #89ddff; }

.cm-s-default .cm-atom { color: #219; }
[data-theme="dark"] .cm-s-default .cm-atom { color: #f78c6c; }

/* Math preview colors */
[data-theme="dark"] #preview {
  color: var(--text-color);
}

[data-theme="dark"] mjx-container {
  color: var(--text-color) !important;
}

/* CodeMirror 6 dark mode */
[data-theme="dark"] .codemirror-wrapper {
  background-color: var(--container-bg);
}

[data-theme="dark"] .cm-editor {
  background-color: var(--container-bg);
  color: var(--text-color);
}

[data-theme="dark"] .cm-content {
  color: var(--text-color);
}

[data-theme="dark"] .cm-placeholder {
  color: #666 !important;
}

[data-theme="dark"] .cm-cursor {
  border-left-color: #ccc;
}

/* Autocomplete dropdown in dark mode */
[data-theme="dark"] .cm-tooltip-autocomplete {
  background: var(--container-bg) !important;
  border-color: var(--border-color) !important;
  color: var(--text-color) !important;
}

[data-theme="dark"] .cm-completionLabel {
  color: var(--text-color) !important;
}

[data-theme="dark"] .cm-completionMatchedText {
  color: var(--text-color) !important;
  text-decoration: underline;
}

[data-theme="dark"] .cm-tooltip-autocomplete ul li[aria-selected] {
  background: rgba(255, 255, 255, 0.1) !important;
  color: var(--text-color) !important;
}